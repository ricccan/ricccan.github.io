<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Homework 2</title>
  <style>
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f5f7fa;
      color: #333;
      line-height: 1.6;
      margin: 40px auto;
      max-width: 900px;
      padding: 20px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
      background: #fff;
      border-radius: 12px;
    }

    h1, h2, h3 {
      color: #2c3e50;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.2em;
      color: #1a5276;
    }

    h2 {
      border-bottom: 2px solid #3498db;
      padding-bottom: 6px;
      margin-top: 40px;
    }

    p {
      text-align: justify;
    }

    ul {
      background: #ecf5fc;
      padding: 15px 25px;
      border-radius: 8px;
      margin: 20px 0;
    }

    li {
      margin-bottom: 10px;
    }

    img {
      display: block;
      margin: 15px auto;
      max-width: 90%;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: transform 0.2s ease-in-out;
    }

    img:hover {
      transform: scale(1.03);
    }

    /* Evidenziazione del codice SQL */
    code {
      background-color: #f4f4f4;
      border-radius: 4px;
      padding: 2px 6px;
      font-family: "Courier New", monospace;
      color: #c0392b;
    }

    footer {
      text-align: center;
      margin-top: 50px;
      font-size: 0.9em;
      color: #777;
    }
  </style>
</head>
<body>
  <h1>Homework 2</h1>

  <h2>What is a Dataset?</h2>

  <p>A dataset is a structured collection of data organized and stored together for analysis or processing. The data within a dataset is typically related in some way and taken from a single source or intended for a single project. For example, a dataset might contain a collection of business data (sales figures, customer contact information, transactions, etc.). A dataset can include many different types of data, from numerical values to text, images or audio recordings. The data within a dataset can typically be accessed individually, in combination or managed as a whole entity.</p>

  <p>Datasets are a fundamental tool in data analytics, data analysis and machine learning (ML), providing the data upon which analysts draw insights and trends. They are essential to ML because selecting the suitable dataset for an ML project is one of the most crucial initial steps of successfully training and deploying an ML model.</p>

  <h3>Dataset vs. Database</h3>

  <p>There’s also often confusion between the terms dataset and database. While a database and a dataset are both related terms used to describe the organization and management of data, they differ in several meaningful ways:</p>

  <p>As defined in the first section, a dataset is a collection of data used for analysis and modeling and typically organized in a structured format. That structured format could be an Excel spreadsheet, a CSV file, a JSON file or other formats. The data in a dataset can be organized in multiple ways and created from a wide variety of sources, such as a customer poll, an experiment or an existing database. A dataset can be used for many purposes, including training and testing machine learning models, data visualization, research or statistical analysis. Datasets can be shared publicly or privately. A dataset is typically smaller in size compared to a database.</p>

  <p>A database is designed for long-term storage and management of large amounts of organized data that is stored electronically, allowing the data to be easily accessed, manipulated and updated. In other words, a database is an organized collection of data stored as multiple datasets. Many different types of databases exist, including relational databases, document databases and key-value databases.</p>

  <h3>What are examples of datasets?</h3>

  <p>A dataset could include numbers, text, images, audio recordings or even basic descriptions of objects. A dataset can be organized in various forms including tables and files. A few examples of datasets include:</p>

  <ul>
    <li>A dataset that includes a listing of all real estate sales in a specific geographic area during a designated time period.</li>
    <li>A dataset that contains information on all the known meteorite landings.</li>
    <li>A dataset on regional air quality in a specific area during a designated time period.</li>
    <li>A dataset that includes the attendance rate for public school students pre-K-12 by student group and by district during the 2021–2022 school year.</li>
  </ul>

  <h2>Data Distribution</h2>

  <p>A data distribution is a function or a listing which shows all the possible values (or intervals) of the data. It also (and this is important) tells you how often each value occurs. Often, the data in a distribution will be ordered from smallest to largest, and graphs and charts allow you to easily see both the values and the frequency with which they appear.</p>

  <p>From a distribution you can calculate the probability of any one particular observation in the sample space, or the likelihood that an observation will have a value which is less than (or greater than) a point of interest.</p>

  <p>The function of a distribution that shows the density of the values of our data is called a probability density function, and is sometimes abbreviated pdf.</p>

  <h3>One Often-Encountered Data Distribution</h3>

  <p>There are some statistical distributions that come up so often they have received their own names; One of these is the bell-shaped curve, also called the normal distribution. When graphed (from smaller to greater, with frequency that values occur being graphed on the y axis) it looks something like a tidy bell shape, with tails on both sides. The graph is continuous; which means every point is included, and there are no discontinuities between points. It is also symmetric over a central point (the mean).</p>

  <p>The normal distribution is actually an infinite family of distributions (each fully defined by unique means and standard deviation) rather than just one, but they share many of the same properties.</p>

  <!-- Nuove sezioni -->
  <h2>DBMS</h2>
  <p>The DBMS has the following attributes: <strong>A, B, K, L</strong>. A is the primary key and they all are integers.</p>
  <img src="Homework2DB.PNG" alt="Database schema" />

  <h2>Univariate Distribution</h2>
  <p>The univariate distribution where <code>K &lt;= 3</code> can be obtained by using the function <code>COUNT()</code> together with <code>GROUP BY (K)</code>.</p>
  <img src="Homework2queymonovalente.PNG" alt="Univariate query" />
  <img src="Homework2queymonovalenterisultati.PNG" alt="Univariate query results" />

  <h2>Bivariate Distribution</h2>
  <p>The bivariate distribution where <code>K &lt;= 3</code> and <code>B &gt; 5</code> can be obtained by using <code>COUNT()</code> and <code>GROUP BY (K, B)</code>.</p>
  <img src="homework2QueryBivalente.PNG" alt="Bivariate query" />
  <img src="Homework2BivalenteResult.PNG" alt="Bivariate query results" />

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Automatic Caesar Cipher Decoder</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* Layout generale */
    * { box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      margin: 24px auto;
      max-width: 980px;
      line-height: 1.6;
      background-color: #f7f9fb;
      color: #333;
      padding: 18px;
    }

    h1 { text-align: center; margin-bottom: 8px; color: #1a5276; }
    p.lead { text-align: center; color: #555; margin-top: 0; margin-bottom: 18px; }

    /* Textarea & controls */
    .panel {
      background: #fff;
      padding: 14px;
      border-radius: 10px;
      box-shadow: 0 6px 18px rgba(20,30,50,0.06);
      margin-bottom: 14px;
    }

    textarea {
      width: 100%;
      height: 160px;
      font-size: 1rem;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      resize: vertical;
      line-height: 1.4;
      overflow: auto;
      white-space: pre-wrap; /* wrap long text */
      word-break: break-word;
    }

    .controls {
      margin-top: 12px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin: 4px 0;
      padding: 8px 14px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.95rem;
    }

    button:hover { background-color: #2c82c9; }

    label { display: flex; align-items: center; gap: 8px; color: #333; }

    input[type="number"] {
      width: 72px;
      padding: 6px 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1rem;
      text-align: center;
      background: #fff;
    }

    /* Result areas */
    #cipherResult, #decodeInfo {
      margin-top: 12px;
      padding: 12px;
      background-color: #ecf5fc;
      border-radius: 8px;
      font-family: monospace;
      white-space: pre-wrap;
      word-break: break-word;
      max-height: 260px;
      overflow: auto; /* evita overflow orizzontale */
      border: 1px solid rgba(52,152,219,0.15);
    }

    /* Canvas */
    .chart-wrapper {
      margin-top: 18px;
      background-color: white;
      border-radius: 10px;
      padding: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.04);
    }

    canvas { width: 100% !important; height: 320px !important; display: block; }

    /* Small helpers */
    .manual-controls {
      display: flex;
      gap: 6px;
      align-items: center;
      margin-left: 6px;
    }

    .small {
      font-size: 0.9rem;
      color: #666;
    }

    @media (max-width: 640px) {
      textarea { height: 140px; }
      canvas { height: 240px !important; }
      .controls { gap: 6px; }
      button { padding: 8px 10px; font-size: 0.9rem; }
    }
  </style>
</head>
<body>

  <h1>Automatic Caesar Cipher Decoder</h1>
  <p class="lead">Insert English text. You can calculate distribution, encrypt, auto-decode (frequency analysis), or manually decode any shift.</p>

  <div class="panel">
    <textarea id="inputText" placeholder="Type or paste your text here..."></textarea>

    <div class="controls">
      <button onclick="calculateDistribution()">Calculate Distribution</button>

      <label>
        Shift:
        <input type="number" id="shiftValue" value="3" min="0" max="25" />
      </label>

      <button onclick="encryptCaesar()">Encrypt with Caesar Cipher</button>
      <button onclick="autoDecode()">Auto Decode (frequency)</button>

      <!-- Manual decode controls -->
      <div class="manual-controls small" title="Manual decode controls">
        <button onclick="changeManualShift(-1)" style="background:#2ecc71">−</button>
        <button onclick="changeManualShift(1)" style="background:#f39c12">+</button>
        <button onclick="manualDecode()">Manual Decode</button>
        <span class="small" style="margin-left:8px;">(use +/- to step shift)</span>
      </div>
    </div>

    <div id="cipherResult" aria-live="polite"></div>
    <div id="decodeInfo" aria-live="polite"></div>
  </div>

  <div class="chart-wrapper">
    <canvas id="letterChart"></canvas>
  </div>

  <script>
    let chartInstance = null;

    // English letter frequencies (percent)
    const englishFrequencies = {
      a: 8.167, b: 1.492, c: 2.782, d: 4.253, e: 12.702,
      f: 2.228, g: 2.015, h: 6.094, i: 6.966, j: 0.153,
      k: 0.772, l: 4.025, m: 2.406, n: 6.749, o: 7.507,
      p: 1.929, q: 0.095, r: 5.987, s: 6.327, t: 9.056,
      u: 2.758, v: 0.978, w: 2.360, x: 0.150, y: 1.974, z: 0.074
    };

    // === utility functions ===
    function caesarShift(text, shift) {
      let result = "";
      for (let char of text) {
        if (/[a-z]/.test(char)) {
          const code = ((char.charCodeAt(0) - 97 + shift + 26) % 26) + 97;
          result += String.fromCharCode(code);
        } else if (/[A-Z]/.test(char)) {
          const code = ((char.charCodeAt(0) - 65 + shift + 26) % 26) + 65;
          result += String.fromCharCode(code);
        } else {
          result += char;
        }
      }
      return result;
    }

    function getLetterFrequencies(text) {
      const freq = {};
      let total = 0;
      for (let i = 97; i <= 122; i++) freq[String.fromCharCode(i)] = 0;
      for (let ch of text.toLowerCase()) {
        if (/[a-z]/.test(ch)) { freq[ch]++; total++; }
      }
      for (let k in freq) {
        freq[k] = total > 0 ? (freq[k] / total) * 100 : 0;
      }
      return freq;
    }

    function renderChart(frequencies, titleText) {
      const labels = Object.keys(frequencies).map(l => l.toUpperCase());
      const values = Object.values(frequencies);
      const ctx = document.getElementById("letterChart").getContext("2d");
      if (chartInstance) chartInstance.destroy();
      chartInstance = new Chart(ctx, {
        type: "bar",
        data: {
          labels: labels,
          datasets: [{
            label: "Letter Frequency (%)",
            data: values,
            backgroundColor: "#3498db",
            borderRadius: 6
          }]
        },
        options: {
          plugins: {
            title: { display: true, text: titleText, font: { size: 16 } },
            legend: { display: false }
          },
          scales: {
            x: { grid: { display: false }, title: { display: true, text: "Letters" } },
            y: { beginAtZero: true, title: { display: true, text: "Frequency (%)" } }
          },
          responsive: true,
          maintainAspectRatio: false
        }
      });
    }

    // === Main actions ===
    function calculateDistribution() {
      const text = document.getElementById("inputText").value || "";
      const freq = getLetterFrequencies(text);
      renderChart(freq, "Letter Distribution (Original Text)");
      clearResultBoxes();
    }

    function encryptCaesar() {
      const text = document.getElementById("inputText").value || "";
      const shift = (parseInt(document.getElementById("shiftValue").value) || 0) % 26;
      const encrypted = caesarShift(text, shift);
      document.getElementById("cipherResult").innerHTML =
        `<strong>Encrypted Text (shift = ${shift}):</strong>\n\n` + escapeHtml(encrypted);
      const freq = getLetterFrequencies(encrypted);
      renderChart(freq, `Letter Distribution (After Caesar, shift=${shift})`);
      document.getElementById("decodeInfo").innerHTML = "";
    }

    // Auto-decode via frequency analysis (existing)
    function autoDecode() {
      const text = document.getElementById("inputText").value || "";
      let bestShift = 0;
      let minDistance = Infinity;
      let bestDecryption = "";

      for (let shift = 0; shift < 26; shift++) {
        const decoded = caesarShift(text, -shift);
        const freq = getLetterFrequencies(decoded);
        let distance = 0;
        for (let letter in englishFrequencies) {
          const diff = freq[letter] - englishFrequencies[letter];
          distance += diff * diff;
        }
        if (distance < minDistance) {
          minDistance = distance;
          bestShift = shift;
          bestDecryption = decoded;
        }
      }

      document.getElementById("decodeInfo").innerHTML =
        `<strong>Automatic Decryption (frequency analysis)</strong>\n\nDetected shift: ${bestShift}\n\nDecoded text:\n\n` + escapeHtml(bestDecryption);

      const freq = getLetterFrequencies(bestDecryption);
      renderChart(freq, `Letter Distribution (Decoded, shift = ${bestShift})`);
      document.getElementById("cipherResult").innerHTML = "";
    }

    // === Manual decode functionality ===
    function manualDecode() {
      const text = document.getElementById("inputText").value || "";
      let shift = parseInt(document.getElementById("shiftValue").value);
      if (isNaN(shift)) shift = 0;
      shift = ((shift % 26) + 26) % 26; // normalize 0..25
      const decoded = caesarShift(text, -shift);
      document.getElementById("decodeInfo").innerHTML =
        `<strong>Manual Decode (shift = ${shift})</strong>\n\n` + escapeHtml(decoded);
      const freq = getLetterFrequencies(decoded);
      renderChart(freq, `Letter Distribution (Manual decode, shift = ${shift})`);
      document.getElementById("cipherResult").innerHTML = "";
    }

    // step the shift input by +/-1
    function changeManualShift(delta) {
      const input = document.getElementById("shiftValue");
      let val = parseInt(input.value) || 0;
      val = (val + delta) % 26;
      if (val < 0) val += 26;
      input.value = val;
    }

    // helper to clear result areas
    function clearResultBoxes() {
      document.getElementById("cipherResult").innerHTML = "";
      document.getElementById("decodeInfo").innerHTML = "";
    }

    // escape for safe display
    function escapeHtml(str) {
      return String(str)
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
    }

    // init: empty chart
    (function initEmpty() {
      const empty = {};
      for (let i = 97; i <= 122; i++) empty[String.fromCharCode(i)] = 0;
      renderChart(empty, "Ready — insert text and choose an action");
    })();

  </script>

</body>


  <footer>
    <p>Homework 2 – Data Management &amp; Analysis</p>
  </footer>
</body>
</html>
